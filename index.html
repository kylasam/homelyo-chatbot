<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Homeit - Premium Living in Berlin Lichtenrade</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: 'Inter', sans-serif; background:#0a0a0a; color:white; min-height:100vh; display:flex; justify-content:center; align-items:center; padding:15px; }
.main-container { display:grid; grid-template-columns:350px 1fr; gap:15px; max-width:1000px; width:100%; max-height:850px; height:95vh; }

/* Sidebar */
.property-sidebar { background: #1a1a1a; border:1px solid #2a2a2a; border-radius:16px; padding:25px; display:flex; flex-direction:column; gap:20px; overflow-y:auto; }
.property-sidebar::-webkit-scrollbar { width:6px; }
.property-sidebar::-webkit-scrollbar-thumb { background:#ff6b9d; border-radius:3px; }

/* Logo Section */
.logo-section { text-align:center; padding-bottom:15px; border-bottom:1px solid #2a2a2a; }
.logo-wrapper { width:140px; height:140px; border-radius:50%; overflow:hidden; margin:0 auto 10px; display:flex; align-items:center; justify-content:center; border:2px solid #ff6b9d; }
.logo-wrapper img { width:90%; height:auto; object-fit:contain; }
.location { font-size:12px; color:#ccc; display:flex; justify-content:center; align-items:center; gap:6px; }

/* Sidebar sections */
.sidebar-section h3 { font-size:14px; font-weight:600; color:#ff6b9d; margin-bottom:8px; }
.sidebar-section p, .sidebar-section li { font-size:13px; line-height:1.6; color:white; }
.sidebar-section ul { padding-left:18px; margin-top:6px; }
.available-rooms a { display:inline-block; margin:4px 4px 0 0; padding:6px 12px; background:#ff6b9d; color:#fff; border-radius:8px; font-size:13px; text-decoration:none; transition:background 0.3s; }
.available-rooms a:hover { background:#c44569; }

/* Chat Container */
.chat-container { background:#1a1a1a; border:1px solid #2a2a2a; border-radius:16px; display:flex; flex-direction:column; height:100%; position:relative; }
.chat-header { background:linear-gradient(135deg,#ff6b9d 0%,#c44569 100%); padding:18px 20px; display:flex; align-items:center; gap:12px; border-bottom:1px solid rgba(255,255,255,0.1); }
.chat-header-avatar { width:60px; height:60px; border-radius:50%; overflow:hidden; border:2px solid white; }
.chat-header-avatar img { width:100%; height:100%; object-fit:cover; }
.chat-header-text h2 { font-size:18px; margin:0; }
.chat-header-text p { font-size:12px; margin-top:3px; opacity:0.9; }

/* Chat messages */
.chat-messages { flex:1; overflow-y:auto; padding:20px; background:#0f0f0f; }
.chat-messages::-webkit-scrollbar { width:6px; }
.chat-messages::-webkit-scrollbar-thumb { background:#ff6b9d; border-radius:3px; }

.message { margin-bottom:16px; display:flex; gap:10px; align-items:flex-start; animation:slideIn 0.3s ease; }
@keyframes slideIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
.message.user { justify-content:flex-end; }
.message.user .avatar { order:2; }
.avatar { width:32px; height:32px; border-radius:50%; overflow:hidden; flex-shrink:0; }
.avatar img { width:100%; height:100%; object-fit:cover; }
.message-content { max-width:70%; padding:12px 16px; border-radius:16px; word-wrap:break-word; line-height:1.5; font-size:13px; }
.message.bot .message-content { background:#1a1a1a; border:1px solid #2a2a2a; }
.message.user .message-content { background:linear-gradient(135deg,#ff6b9d 0%,#c44569 100%); color:white; }

.chat-input-container { display:flex; gap:10px; padding:15px 20px; border-top:1px solid #2a2a2a; }
#messageInput { flex:1; padding:12px 16px; border-radius:24px; border:1px solid #2a2a2a; background:#0f0f0f; color:white; font-size:13px; outline:none; }
#messageInput::placeholder { color:#666; }
#sendButton { width:40px; height:40px; border-radius:50%; border:none; background:linear-gradient(135deg,#ff6b9d 0%,#c44569 100%); color:white; cursor:pointer; display:flex; justify-content:center; align-items:center; font-size:18px; }

/* Typing indicator */
.typing-indicator-wrapper { display:flex; gap:10px; align-items:flex-start; padding-left:10px; }
.typing-indicator { display:none; padding:12px 16px; background:#1a1a1a; border:1px solid #2a2a2a; border-radius:16px; max-width:60px; }
.typing-indicator.active { display:flex; gap:4px; }
.typing-indicator span { width:7px; height:7px; background:#ff6b9d; border-radius:50%; animation:bounce 1.4s infinite; }
.typing-indicator span:nth-child(2){animation-delay:0.2s;}
.typing-indicator span:nth-child(3){animation-delay:0.4s;}
@keyframes bounce{0%,60%,100%{transform:translateY(0);}30%{transform:translateY(-6px);}}

/* Intro message */
.intro-message { background: rgba(255,107,157,0.08); border:1px solid rgba(255,107,157,0.2); border-radius:12px; padding:16px; margin-bottom:16px; }
.intro-message h3 { color:#ff6b9d; margin-bottom:8px; font-size:15px; }
.intro-message p, .intro-message li { font-size:13px; line-height:1.5; color:white; }
.intro-message ul { padding-left:18px; margin-top:6px; }

/* Welcome video button & modal */
#welcomeVideoBtn { position:fixed; bottom:20px; right:20px; width:60px; height:60px; border-radius:50%; overflow:hidden; background:#ff6b9d; display:flex; justify-content:center; align-items:center; cursor:pointer; border:2px solid white; z-index:9999; }
#welcomeVideoBtn img { width:100%; height:100%; object-fit:cover; border-radius:50%; }

#videoModal { display:none; position:fixed; bottom:90px; right:20px; width:300px; height:200px; background:black; border-radius:12px; overflow:hidden; z-index:9999; box-shadow:0 4px 12px rgba(0,0,0,0.5); }
#videoModal video { width:100%; height:100%; object-fit:cover; }
#videoClose { position:absolute; top:4px; right:6px; color:white; font-size:18px; font-weight:bold; cursor:pointer; }

@media (max-width:768px){ .main-container{grid-template-columns:1fr;} .property-sidebar{display:none;} .message-content{max-width:80%;} }
</style>
</head>
<body>
<div class="main-container">

<!-- Sidebar -->
<div class="property-sidebar">
    <div class="logo-section">
        <div class="logo-wrapper">
            <img src="https://raw.githubusercontent.com/kylasam/homelyo-chatbot/cf870d5984d561cd876abe76ef33912cb621ca65/assets/Homelyo-logo-new.jpg" alt="Homeit Logo">
        </div>
        <div class="location">
            <span>üìç</span><span>Lichtenrader Damm, 12305 Berlin</span>
        </div>
    </div>

    <div class="sidebar-section">
        <h3>About</h3>
        <p>Premium co-living in Berlin's peaceful Lichtenrade district with modern amenities and excellent transport connections.</p>
    </div>

    <div class="sidebar-section">
        <h3>Features</h3>
        <div class="features-list">
            <div class="feature-item">üõèÔ∏è Fully furnished rooms</div>
            <div class="feature-item">üå≥ Green neighborhood</div>
            <div class="feature-item">‚ú® Modern facilities</div>
            <div class="feature-item">üö≠ No smoking policy</div>
            <div class="feature-item">üêï Pet-free environment</div>
        </div>
    </div>

    <div class="sidebar-section">
        <h3>Available Rooms</h3>
        <div class="available-rooms">
            <a href="https://www.homelyo.eu/ke1" target="_blank">KE1</a>
            <a href="https://www.homelyo.eu/ke2" target="_blank">KE2</a>
            <a href="https://www.homelyo.eu/ke3" target="_blank">KE3</a>
            <a href="https://www.homelyo.eu/ke4" target="_blank">KE4</a>
        </div>
    </div>

    <div class="sidebar-section">
        <h3>Booking</h3>
        <a href="https://www.homelyo.eu/contact-us" target="_blank" style="color:#ff6b9d;text-decoration:underline;">Submit a booking request</a>
    </div>
</div>

<!-- Chat -->
<div class="chat-container">
    <div class="chat-header">
        <div class="chat-header-avatar"><img src="https://raw.githubusercontent.com/kylasam/homelyo-chatbot/cf870d5984d561cd876abe76ef33912cb621ca65/assets/chat-bot-image.png" alt="Sara"></div>
        <div class="chat-header-text">
            <h2>Sara from Homelyo</h2>
            <p>üü¢ Online ‚Ä¢ Ready to assist you</p>
        </div>
    </div>

    <div class="chat-messages" id="chatMessages">
        <div class="intro-message">
            <h3>üëã Hello! I'm Sara</h3>
            <p>Your personal assistant for Homelyo at Lichtenrader Damm, 12305 Berlin.</p>
            <p>I can help you with:</p>
            <ul>
                <li>‚úì Available Rooms (KE1, KE2, KE3, KE4)</li>
                <li>‚úì Amenities</li>
                <li>‚úì Booking process</li>
                <li>‚úì Location & transport info</li>
            </ul>
        </div>
    </div>

    <div class="typing-indicator-wrapper">
        <div class="typing-indicator" id="typingIndicator"><span></span><span></span><span></span></div>
    </div>

    <div class="chat-input-container">
        <input type="text" id="messageInput" placeholder="Type your message..." autocomplete="off">
        <button id="sendButton">‚û§</button>
    </div>
</div>

</div>

<!-- Welcome Video Button -->
<div id="welcomeVideoBtn" title="Play Welcome Video">
    <img src="https://raw.githubusercontent.com/kylasam/homelyo-chatbot/cf870d5984d561cd876abe76ef33912cb621ca65/assets/welcome-video-thumb.png" alt="Welcome Video">
</div>

<!-- Video Modal -->
<div id="videoModal">
    <div id="videoClose">√ó</div>
    <video id="welcomeVideo" src="https://raw.githubusercontent.com/kylasam/homelyo-chatbot/cf870d5984d561cd876abe76ef33912cb621ca65/assets/welcome.mp4" controls muted></video>
</div>

<script>
// N8N webhook
const WEBHOOK_URL = 'https://assistant-proxy.kylashpriya.workers.dev/';

const chatMessages = document.getElementById('chatMessages');
const messageInput = document.getElementById('messageInput');
const sendButton = document.getElementById('sendButton');
const typingIndicator = document.getElementById('typingIndicator');

sendButton.addEventListener('click', sendMessage);
messageInput.addEventListener('keypress', e=>{if(e.key==='Enter') sendMessage();});

function sendMessage(){
    const text = messageInput.value.trim();
    if(!text) return;
    addMessage(text,'user');
    messageInput.value='';
    showTyping();
    fetch(WEBHOOK_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:text})})
    .then(res=>res.json())
    .then(data=>{
        hideTyping();
        addMessage(data.reply,'bot');
    })
    .catch(err=>{
        hideTyping();
        addMessage('Error connecting to chatbot.','bot');
    });
}

function addMessage(text,sender){
    const msgDiv=document.createElement('div');
    msgDiv.className='message '+sender;
    msgDiv.innerHTML=`<div class="avatar"><img src="${sender==='bot'?'https://raw.githubusercontent.com/kylasam/homelyo-chatbot/cf870d5984d561cd876abe76ef33912cb621ca65/assets/chat-bot-image.png':''}"></div><div class="message-content">${text}</div>`;
    chatMessages.appendChild(msgDiv);
    chatMessages.scrollTop=chatMessages.scrollHeight;
}

function showTyping(){typingIndicator.classList.add('active');}
function hideTyping(){typingIndicator.classList.remove('active');}

// Video Button
const videoBtn=document.getElementById('welcomeVideoBtn');
const videoModal=document.getElementById('videoModal');
const welcomeVideo=document.getElementById('welcomeVideo');
const videoClose=document.getElementById('videoClose');

videoBtn.addEventListener('click',()=>{
    videoModal.style.display='block';
    welcomeVideo.play();
});
videoClose.addEventListener('click',()=>{
    videoModal.style.display='none';
    welcomeVideo.pause();
    welcomeVideo.currentTime=0;
});
videoBtn.addEventListener('contextmenu',e=>e.preventDefault());
</script>
</body>
</html>
